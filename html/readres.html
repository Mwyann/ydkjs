<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>Test YDKJ</title>

<script src="js/jquery-1.11.0.min.js" type="text/javascript"></script>
<script src="js/SeamlessLoop.js" type="text/javascript"></script>

<link rel="stylesheet" href="css/ui-lightness/jquery-ui-1.10.4.custom.min.css">
<script src="js/jquery-ui-1.10.4.custom.min.js"></script>

<script type="text/javascript">
var animationSpeed = 66;
</script>

<script src="js/demo-res.js" type="text/javascript"></script>
<script src="js/common.js" type="text/javascript"></script>
<script src="js/YDKJFile.js" type="text/javascript"></script>
<script src="js/YDKJAnimation.js" type="text/javascript"></script>
<script type="text/javascript">

jQuery(document).ready(function() {
    var anim = 0;
    var animationFile = '';
    var loadAnim = function() {
      if (anim) anim.free();
      anim = new YDKJAnimation(animationFile+'.gif',animationFile+'.js','',0,0);
      anim.ready(function() {
        var thisAnim = this;

        $("#slider").slider({
          value:0,
          min: 0,
          max: thisAnim.frames.length,
          step: 1,
          slide: function( event, ui ) {
            if (anim) anim.free();
            anim = new YDKJAnimation(animationFile+'.gif',animationFile+'.js','',ui.value,0,ui.value);
            anim.ready(function() {
              this.play();
            });
          }
        });
      });
      anim = 0;
    };

    var filename = $('#filename');
    animationFile = 'res/5QDemo/off4/'+filename.val();
    loadAnim();
    filename.on('change',function() {
      animationFile = 'res/5QDemo/off4/'+$(this).val();
      loadAnim();
    });

    $('#animslow').on('click',function() {
      if ($('#animslow').is(':checked')) animationSpeed = 300; else animationSpeed = 66;
    });

    $('#animplay').on('click',function() {
        var framefrom = parseInt($('#framefrom').val());
        if (!framefrom) framefrom = 0;
        var frameto = parseInt($('#frameto').val());
        if (!frameto) frameto = -1;
        var animloop = $('#animloop').is(':checked');

        if (anim) {
          anim.free();
          anim = 0;
        }

        if ((framefrom >= 0) && (animationFile != '')) {
          anim = new YDKJAnimation(animationFile+'.gif',animationFile+'.js','',framefrom,animloop,frameto);
          anim.ready(function() {
            this.play();
          });
        }
    });

    $('#animstop').on('click',function() {
        if (anim) {
            anim.free();
            anim = 0;
        }
    });
});

function play(t) {
  var jt = jQuery(t);
  anim = new YDKJAnimation(animationFile+'.gif',animationFile+'.js','',jt.val(),0);
  anim.ended(function() {
    this.free();
  });
  anim.ready(function() {
    this.play();
  });
}

</script>
</head>

<body style="background-color:#333">
  <div id="screen" style="background-color:#000;position:relative;width:640px;height:480px;overflow:hidden;margin-left:auto;margin-right:auto;margin-top:30px"></div> <!-- Couleur #EEE pour l'intro -->
  <div id="slider" style="width:90%;margin: 10px auto"></div>
  <div id="debuglive" style="background-color:#000;color:#FFF;padding:5px;margin-top:10px;"><br/></div>
  <div id="debug" style="background-color:#000;color:#FFF;padding:5px;margin-top:10px;height:150px;overflow-y:scroll">
     Select a file:
     <select id="filename">
         <option value="3000">3000 - Player Numbers</option>
         <option value="3540">3540 - Intro & Outro</option>
         <option value="8009">8009 - Timer 1</option>
         <option value="8014">8014 - Timer 2</option>
         <option value="8017">8017 - Timer 3</option>
         <option value="8018">8018 - Timer 10 seconds</option>
         <option value="8021">8021 - Timer 30 seconds</option>
         <option value="8041">8041 - Timer 4</option>
         <option value="10000">10000 - Categories 1</option>
         <option value="10001">10001 - Categories 2</option>
         <option value="10002">10002 - Categories 3</option>
         <option value="11000">11000 - 1000 F</option>
         <option value="11020">11020 - 2000 F</option>
         <option value="11030">11030 - 3000 F</option>
         <option value="12000">12000 - Questions</option>
         <option value="14000">14000 - DisOrDat</option>
         <option value="14900">14900 - DOD Player 1</option>
         <option value="14930">14930 - DOD Player 2</option>
         <option value="14950">14950 - DOD Player 3</option>
         <option value="17000">17000 - Options Menu</option>
         <option value="18000">18000 - Outro Menu</option>
         <option value="19000">19000 - Fill In The Blanks</option>
         <option value="20000">20000 - Who is this</option>
         <option value="21000">21000 - Open Your Eyes</option>
         <option value="23000">23000 - Hiscores</option>
     </select><br/><br/>
     Play from <input type="text" id="framefrom" style="width:50px"/> to <input type="text" id="frameto" style="width:50px"/> loop <input type="checkbox" id="animloop" /> slow <input type="checkbox" id="animslow" /> <input type="button" id="animplay" value="Play" /> <input type="button" id="animstop" value="Stop" /><br/><br/>

  </div>
  <div id="tmpscreen" style="display:none"></div>
  <div id="preload" style="display:none"></div>
</body>
</html>